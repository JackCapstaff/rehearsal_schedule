{% extends "base.html" %}
{% set title = "Reset Password" %}
{% set subtitle = "Choose a new password" %}

{% block content %}
  <div class="card" style="max-width:520px; margin: 0 auto;">
    {% if error %}
      <div class="small" style="color:#b00020; margin-bottom:10px;">{{ error }}</div>
    {% endif %}

    {% if token %}
      <form method="post" action="{{ url_for('reset_password_post') }}">
        <input type="hidden" name="token" value="{{ token }}">

        <div style="margin-bottom:12px;">
          <label class="small">New password</label>
          <input type="password" name="password" required style="width:100%; padding:10px; margin-top:6px;">
        </div>

        <div style="margin-bottom:12px;">
          <label class="small">Confirm new password</label>
          <input type="password" name="password2" required style="width:100%; padding:10px; margin-top:6px;">
        </div>

        <div style="display:flex; gap:10px; align-items:center; margin-top:16px;">
          <button class="btn" type="submit">Set new password</button>
          <a class="btn secondary" href="{{ url_for('login_view') }}">Back to login</a>
        </div>
      </form>
    {% else %}
      <div class="small">Follow the password reset link you received in email. If the link has expired, request a new one.</div>
      <div style="margin-top:12px;"><a href="{{ url_for('forgot_password_view') }}">Request a new reset link</a></div>
    {% endif %}
  </div>
{% endblock %}
